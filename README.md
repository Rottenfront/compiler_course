# Compiler course language

This repo contains compiler, that supports (should support) several syntaxes.
Right now Lama syntax is implemented.

## Lama syntax

### Functions

Function declaration should have function name, parameter names with types,
function type and body.

```
func <name> (<name> : <type>) (<name> : <type>) <...> : <type> = <expr>
```

Sample:
```
func fib2 (n : int) (a : int) (b : int) : int =
  if n <= 1 then
    b
  else
    fib2 (n - 1) b (a + b)

func main : int =
  let x = read in
  print_int x;
  print_int (fib2 x 1 1);
  0
```


Type is either:
```
int
bool
()
[<type>...] <type>
```

Expression can be either:
- literal (integer or Boolean constant (true/false))
- variable/parameter
- application (as in Metalang languages)
- operator application (only binary operators are supported now):
  * OpAdd -> "+"
  * OpSub -> "-"
  * OpMul -> "*"
  * OpDiv -> "/"
  * OpEq -> "=="
  * OpNe -> "!="
  * OpLess -> "<"
  * OpGreater -> ">"
  * OpLessEq -> "<="
  * OpGreaterEq -> ">="
  * OpAnd -> "&&"
  * OpOr -> "||"
  * OpXor -> "^"
  * OpSemicolon -> ";"
- conditional branching
  if <cond> then <expr> else <expr>
- variable creation:
  ```
  let <name> = <expr> in <expr>
  ```
- parentheses with expression inside
- empty parentheses

### Interpretation
Unit type generated by built-in functions is zero in assembly.
If main function returns unit, exit code is zero. If main function returns
integer, exit code is returned integer.
